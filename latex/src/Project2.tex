\documentclass[a4paper,11pt]{article}

\usepackage{StealthNet}

% Graphics directory
\ifpdf
    % pdflatex requires bitmap images.
    \graphicspath{{./img/png/}}
\else
    % latex requires vector images.
    \graphicspath{{./img/eps/}}
\fi

% Title page details
\title{StealthNet Security Implementation}
\author{Joshua Spence \\ 308216350 \and Ahmad Al Mutawa \\ 312003919 \and James Moutafidis \\ ???}
\date{May 2012}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\maketitle

% INTRODUCTION
\section{Introduction}
% TODO

% ASYMMETRIC AUTHENTICATION
\section{Asymmetric Authentication}

\subsection{Introduction}
% TODO

\subsection{Details}
% TODO

\subsection{Justification}
% TODO

\subsection{Implementation}
% TODO
 
% FILE ENCRYPTION
\section{File Encryption}

\subsection{Introduction}
% TODO

\subsection{Details}
% TODO

\subsection{Justification}
% TODO

\subsection{Implementation}
% TODO

% ASYMMETRIC VERIFICATION
\section{Asymmetric Verification}

\subsection{Introduction}
% TODO

\subsection{Details}
% TODO

\subsection{Justification}
% TODO

\subsection{Implementation}
% TODO

% CURRENCY SYSTEM
\section{Currency System}

\subsection{Introduction}
% TODO

\subsection{Details}
% TODO

\subsection{Justification}
% TODO

\subsection{Implementation}
% TODO

% GENERAL IMPLEMENTATION DETAILS
\section{General Implementation Details}

\subsection{Security Measures}
The implementation of the various security measures implemented in 
\packageName{} are detailed in the previous sections. In order to share
cryptographic keys between parties, modifications were made to the 
\packageName{} \verb+Packet+ class to accommodate three additional command types:
\begin{itemize}
\item \verb+CMD_AUTHENTICATIONKEY+: For exchanging \algorithm{Diffie-Hellman} 
keys between the parties.
\item \verb+CMD_INTEGRITYKEY+: For exchanging \algorithm{SHA-1} keys used for
\algorithm {Hashed Message Authentication Code (HMAC)} generation and 
verification.
\item \verb+CMD_NONCESEED+: A seed for a \verb+PRNGNonceGenerator+, 
which is used to generate and verify nonces that are appended to a packet in 
order to prevent replay prevention.
\end{itemize}

These additional packet commands should not appear during normal execution of 
\serviceName{}, but rather should only exist during execution of the
\verb+initiateSession()+ and \verb+acceptSession()+ functions, and are handled 
completely within the \verb+Comms+ class.

\subsection{Packet}
In order to share additional data between communicating parties, the 
\serviceName{} \verb+Packet+ class was renamed to \verb+DecryptedPacket+ and 
extended such that it is composed of the following fields:
\begin{itemize}
\item \verb+command+: The command type being transmitted in the 
packet.
\item \verb+data+: The command data being transmitted in the packet.
\item \verb+nonce+: The unique nonce, generated by a pseudo-random number 
generator in order to allow a given message to be received only once on the 
receiving end of the communications.
\end{itemize}

An additional class, \verb+EncryptedPacket+ was designed to store the following
data:
\begin{itemize}
\item \verb+data+: The encrypted contents of the corresponding 
\verb+DecryptedPacket+.
\item \verb+digest+: The MAC digest of the encrypted packet contents, used to 
verify packet integrity.
\end{itemize}

\subsection{Order of Application of Security Measures}
The security measures are applied to packet data in the following order:
\begin{enumerate}
\item Nonce generation
\item Encryption
\item MAC digest calculation
\end{enumerate}

This ordering effectively defines the degree to which the various security 
protocols are effective. MAC digest calculation generates a MAC digest based on
the encrypted packet's \verb+command+, \verb+data+ and \verb+nonce+ fields and 
can, consequently, be used to verify the integrity of these three fields. All 
security methods occur internally to the \verb+DecryptedPacket+ and 
\verb+EncryptedPacket+ classes, either at the time that the packet is 
instantiated or just before/after the packet is transmitted/received.

Encryption is applied to all \verb+DecryptedPacket+ fields --- \verb+command+, 
\verb+data+ and \verb+nonce+. Whilst not strictly necessary, this ensures that 
all of these fields remain private from a potential attacker, giving the 
attacker very little information on which to base an attack. 

\subsection{Proxy}
In addition to the provided \serviceName{} \verb+Client+ and \verb+Server+ 
classes, I have implemented an additional \serviceName{} entity --- a 
\serviceName{} \verb+Proxy+. This class acts as a ``man-in-the-middle'' for
\serviceName{} communications. In its normal mode of operation, this class will
simply accept incoming \serviceName{} communications as if it were a 
\serviceName{} server, and will then create its own additional \serviceName{}
communication to the \emph{real} \serviceName{} server. Once these channels have
been created, the proxy simply forwards all received packet strings (note that 
the proxy makes no attempt to parse strings into \verb+Packet+s) to the other
party. So, in its normal mode of operation, using \serviceName{} through the
proxy will be transparent to both the client and the server, and will have no
impact on the quality of the communications.

However, the \verb+Proxy+ class has additional functionality to simulate 
various security attacks. The proxy server is, for example, able to replay 
transmitted packets and modify the encrypted packet data. The usefulness of this
class is that it can provide these simulations, thus allowing the effectiveness
of the implementation of the security protocols in \serviceName{} to be 
observed.

% CONCLUSION
\section{Conclusion}
% TODO

\end{document}
